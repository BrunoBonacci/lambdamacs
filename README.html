<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-09-17 Thu 22:04 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>(λmacs)</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Bruno Bonacci" />
<link rel="stylesheet" type="text/css" href="./assets/GTD.css" />
</head>
<body>
<div id="content">
<h1 class="title">(λmacs)
<br />
<span class="subtitle">Emacs for Clojure development on macOS X.</span>
</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9f71874">Intro</a>
<ul>
<li><a href="#org2bd3416">Motivation</a></li>
<li><a href="#orgc93259b">Installation</a></li>
<li><a href="#org6ae2844">Configuration</a></li>
<li><a href="#orgffcb021">Structure</a></li>
<li><a href="#org9af10a1">Packages installed</a></li>
<li><a href="#org8900b9d">Keybindings</a></li>
</ul>
</li>
<li><a href="#orgd7d32b0">Features</a>
<ul>
<li><a href="#org0b70f67">Switch Java version</a></li>
<li><a href="#orgdc595dd">Custom yasnippets</a></li>
</ul>
</li>
<li><a href="#org3c7f6a5">Get involved</a>
<ul>
<li><a href="#org9089d7c">Contribution</a></li>
<li><a href="#org755ae9a">References</a></li>
<li><a href="#org8526d6b">License</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org9f71874" class="outline-2">
<h2 id="org9f71874">Intro</h2>
<div class="outline-text-2" id="text-org9f71874">
<p>
(λmacs) is Emacs for Clojure development on macOS X.
</p>


<div id="orgc17e203" class="figure">
<p><img src="./assets/lambdamacs_600.png" alt="lambdamacs_600.png" width="600" />
</p>
</div>

<ul class="org-ul">
<li>Check <a href="https://htmlpreview.github.io/?https://github.com/BrunoBonacci/lambdamacs/blob/master/README.html">documentation online</a>.</li>
<li>Check the code on <a href="https://github.com/BrunoBonacci/lambdamacs">Github</a>.</li>
</ul>
</div>

<div id="outline-container-org2bd3416" class="outline-3">
<h3 id="org2bd3416">Motivation</h3>
<div class="outline-text-3" id="text-org2bd3416">
<p>
For a number of years I've been using Emacs as my primary/only IDE.  I
used a number of "<i>distributions</i>" readily available on internet such
as <a href="https://github.com/overtone/emacs-live">emacs-live</a> and <a href="https://github.com/bbatsov/prelude">Prelude</a> of which I made my own extension <a href="https://github.com/BrunoBonacci/preludex">Preludex</a>,
and I watched the birth of <a href="https://www.spacemacs.org/">Spacemacs</a> and the new challenger
<a href="https://github.com/hlissner/doom-emacs">doom-emacs</a>.
</p>

<p>
Over time each of these distributions grew larger and larger
and it became hard to keep the configuration up-to-date
but still minimal (just what you need).
</p>

<p>
So I decided to build my own out of the best pieces of all of them.
</p>

<p>
If you are new to Emacs, it is probably best if you start with one of
the more popular distributions so that you get enough community
support. If only you need is to develop Clojure, and have enough
tooling support feel free to use my configuration.
</p>
</div>
</div>

<div id="outline-container-orgc93259b" class="outline-3">
<h3 id="orgc93259b">Installation</h3>
<div class="outline-text-3" id="text-orgc93259b">
<ul class="org-ul">
<li>Download and install <a href="https://emacsformacosx.com/">Emacs For Mac OS X</a> if you don't have it yet!</li>
</ul>
<p>
Alternatively you can install it via:
</p>
<div class="org-src-container">
<pre class="src src-sh">sudo mkdir /usr/local/Frameworks
sudo chown $(whoami):admin /usr/local/Frameworks
brew tap d12frosted/emacs-plus
brew install emacs-plus@27 --with-no-frame-refocus --with-modern-icon --with-xwidgets
</pre>
</div>

<ul class="org-ul">
<li>Backup your previous installation:</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">mv ~/.emacs.d ~/.emacs.d-backup
</pre>
</div>

<ul class="org-ul">
<li>Clone <code>(λmacs)</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">git clone https://github.com/BrunoBonacci/lambdamacs.git ~/.emacs.d
</pre>
</div>

<ul class="org-ul">
<li>Install platform tools</li>
</ul>
<p>
Some platform tools are used to enhance the user experience and to
support some features.
</p>
<div class="org-src-container">
<pre class="src src-sh">brew install the_silver_searcher aspell
</pre>
</div>

<ul class="org-ul">
<li>That's all, start hacking!</li>
</ul>

<p>
If you want you can customize your configuration (see next section).
</p>
</div>
</div>
<div id="outline-container-org6ae2844" class="outline-3">
<h3 id="org6ae2844">Configuration</h3>
<div class="outline-text-3" id="text-org6ae2844">
<p>
There are a number of configurable options to setup <code>(λmacs)</code> just
right for your environment.
</p>

<p>
To change the configuration file edit <code>config/user-config.el</code>.
</p>

<ul class="org-ul">
<li>First configure your name and email:</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">;; add your name and email address
(setq user-full-name    "Firstname Lastname"
      user-mail-address "your-email@email.org")
</pre>
</div>

<ul class="org-ul">
<li>Install a nice looking font and pick a size:</li>
</ul>
<p>
Here some suggestions:
</p>

<ul class="org-ul">
<li><a href="https://github.com/powerline/fonts/tree/master/RobotoMono">Roboto Mono</a></li>
<li><a href="https://github.com/tonsky/FiraCode">Fira Code</a></li>
<li><a href="https://rubjo.github.io/victor-mono/">Victor Mono</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq lambdamacs/default-font "Roboto Mono Thin for Powerline")
(setq lambdamacs/default-font-size 150)
</pre>
</div>

<ul class="org-ul">
<li>Select your favorite theme</li>
</ul>
<p>
There are a number a themes already installed see <a href="https://github.com/hlissner/emacs-doom-themes">the full list</a> and
see <a href="https://github.com/hlissner/emacs-doom-themes/tree/screenshots">theme screenshots</a>.  I'd recommend to pick your favorite as default
and use a light theme as alternative. It can be useful sometimes to
switch to the alternative for example if you make a
presentation. Light themes work better with projectors.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq lambdamacs/default-theme 'doom-moonlight)
(setq lambdamacs/alternative-theme 'doom-one-light)
</pre>
</div>

<p>
You can switch between themes by typing <code>M-x switch-theme-to-alternative</code>
and switch back to the default theme with <code>M-x switch-theme-to-default</code>
</p>
</div>
</div>

<div id="outline-container-orgffcb021" class="outline-3">
<h3 id="orgffcb021">Structure</h3>
<div class="outline-text-3" id="text-orgffcb021">
<p>
<code>(λmacs)</code> has the following project structure:
</p>

<pre class="example">
.emacs.d
├── init.el    - main emacs init file
├── config/    - user configuration and other settings
├── modules/   - packages which are not available in MELPA
├── src/       - package installation and configuration
├── assets/    - Assets for this project (images, css, etc)
├── yas/       - Custom Yasnippets
└── .save/     - Locally saved items (history, items etc.)
</pre>
</div>
</div>

<div id="outline-container-org9af10a1" class="outline-3">
<h3 id="org9af10a1">Packages installed</h3>
<div class="outline-text-3" id="text-org9af10a1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Package</th>
<th scope="col" class="org-left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>bookmarks</code></td>
<td class="org-left">Code bookmarks</td>
</tr>

<tr>
<td class="org-left"><code>cider</code></td>
<td class="org-left">CIDER the best IDE for Clojude development</td>
</tr>

<tr>
<td class="org-left"><code>clj-refactor</code></td>
<td class="org-left">Cider companion for refactoring</td>
</tr>

<tr>
<td class="org-left"><code>command-log</code></td>
<td class="org-left">Displays a buffer with the keys and commands you type</td>
</tr>

<tr>
<td class="org-left"><code>doom-modeline</code></td>
<td class="org-left">cool minimalistic modeline</td>
</tr>

<tr>
<td class="org-left"><code>doom-theme</code></td>
<td class="org-left">a collection of well curated themes</td>
</tr>

<tr>
<td class="org-left"><code>flycheck</code></td>
<td class="org-left">Run checks on the fly</td>
</tr>

<tr>
<td class="org-left"><code>flyspell</code></td>
<td class="org-left">Spell checking</td>
</tr>

<tr>
<td class="org-left"><code>forge</code></td>
<td class="org-left">Magit extension for Pull Requests and Issues</td>
</tr>

<tr>
<td class="org-left"><code>magit</code></td>
<td class="org-left">Git controls</td>
</tr>

<tr>
<td class="org-left"><code>markdown</code></td>
<td class="org-left">Markdown mode support with TOC and Live preview (via <code>flymd</code>)</td>
</tr>

<tr>
<td class="org-left"><code>multiple-cursors</code></td>
<td class="org-left">Multiple cursors for editing</td>
</tr>

<tr>
<td class="org-left"><code>outline-presentation</code></td>
<td class="org-left">Use org-mode to make a presentation</td>
</tr>

<tr>
<td class="org-left"><code>paradox</code></td>
<td class="org-left">A package manager which makes very easy to update your installation</td>
</tr>

<tr>
<td class="org-left"><code>paredit</code></td>
<td class="org-left">Can't develop Clojure without structural editing</td>
</tr>

<tr>
<td class="org-left"><code>prodigy</code></td>
<td class="org-left">Local process management</td>
</tr>

<tr>
<td class="org-left"><code>projectile</code></td>
<td class="org-left">Useful functions for working with projecs</td>
</tr>

<tr>
<td class="org-left"><code>restclient</code></td>
<td class="org-left">Turn simple text buffer into HTTP REST calls</td>
</tr>

<tr>
<td class="org-left"><code>sticky-windows</code></td>
<td class="org-left">Stick windows in place (no auto close)</td>
</tr>

<tr>
<td class="org-left"><code>switch-java</code></td>
<td class="org-left">Enables to select the JVM version while inside emacs</td>
</tr>

<tr>
<td class="org-left"><code>treemacs</code></td>
<td class="org-left">Project tree navigation</td>
</tr>

<tr>
<td class="org-left"><code>undo-tree</code></td>
<td class="org-left">Powerful multi-state undo</td>
</tr>

<tr>
<td class="org-left"><code>wgrep</code></td>
<td class="org-left">Editable search buffers</td>
</tr>

<tr>
<td class="org-left"><code>witespace</code></td>
<td class="org-left">To clean trailing whitespaces in the code</td>
</tr>

<tr>
<td class="org-left"><code>wsd</code></td>
<td class="org-left">WebSequenceDiagrams</td>
</tr>

<tr>
<td class="org-left"><code>yas-snippet</code></td>
<td class="org-left">Code snippets</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>TODO:</li>
<li class="off"><code>[&#xa0;]</code> bookmarks</li>
<li class="off"><code>[&#xa0;]</code> restclient</li>
<li class="off"><code>[&#xa0;]</code> wsd</li>
<li class="off"><code>[&#xa0;]</code> eldoc?</li>
<li class="off"><code>[&#xa0;]</code> winner-mode?? workgroups / toggle-zoom</li>
<li class="off"><code>[&#xa0;]</code> code rtf pygments</li>
<li class="off"><code>[&#xa0;]</code> lsp-java??</li>
<li class="off"><code>[&#xa0;]</code> daemon setup</li>
</ul>
</div>
</div>

<div id="outline-container-org8900b9d" class="outline-3">
<h3 id="org8900b9d">Keybindings</h3>
<div class="outline-text-3" id="text-org8900b9d">
<p>
Here is the list of keybindings which are added by this configuration.
<i>All standard keybindings are valid, plus the default keybindings of the pacakge installed</i>.
</p>

<p>
Here is how to read the keybindings:
</p>
<ul class="org-ul">
<li><code>C-x</code> - <i>means</i> <code>Ctrl</code> + <code>x</code></li>
<li><code>C-x 1</code> - <i>means</i> <code>Ctrl</code> + <code>x</code> followed by <code>1</code></li>
<li><code>M-x</code> - <i>means</i> <code>Meta</code> + <code>x</code> or <code>Alt</code> + <code>x</code> or <code>Option</code> + <code>x</code></li>
<li><code>s-x</code> - <i>means</i> <code>Super</code> + <code>x</code> or <code>Command ⌘</code> + <code>x</code></li>
<li><code>SPC</code> - is <b>space bar</b></li>
<li><code>RET</code> - is <b>reutrn key</b></li>
</ul>

<p>
Here the keybindings added/defined by <code>(λmacs)</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Mode</th>
<th scope="col" class="org-left">Key</th>
<th scope="col" class="org-left">Action</th>
<th scope="col" class="org-left">Module</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">*</td>
<td class="org-left"><code>⌘-c</code></td>
<td class="org-left">Copy selected region (like macOS - more natural)</td>
<td class="org-left"><code>cua-mode</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>⌘-v</code></td>
<td class="org-left">Paste selected region (like macOS - more natural)</td>
<td class="org-left"><code>cua-mode</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>M-y</code></td>
<td class="org-left">Browse the content of the <code>kill-ring</code></td>
<td class="org-left"><code>browse-kill-ring</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-=</code></td>
<td class="org-left">Expands the selection to the larger surrounding form.</td>
<td class="org-left"><code>expand-region</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-RET</code></td>
<td class="org-left">Toggle rectangular selection</td>
<td class="org-left"><code>cua-mode</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-x 9</code></td>
<td class="org-left">Locks the window in place so that it can't be closed.</td>
<td class="org-left"><code>sticky-windows</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-u C-x 0</code></td>
<td class="org-left">Closes a locked window (via <code>C-x 9</code>)</td>
<td class="org-left"><code>sticky-windows</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-x p</code></td>
<td class="org-left">Open <b>Prodigy</b>'s status buffer (start/stop processes)</td>
<td class="org-left"><code>prodigy</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-x t t</code></td>
<td class="org-left">Open <b>Treemacs</b> project tree.</td>
<td class="org-left"><code>treemacs</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-x C-/</code></td>
<td class="org-left">Open <b>dired</b> explorer for the current file.</td>
<td class="org-left"><code>(λmacs)</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-x g</code></td>
<td class="org-left">Open <b>Magit</b> status</td>
<td class="org-left"><code>magit</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-x M-g</code></td>
<td class="org-left">Minibuffer popup with <b>Magit</b> dispatch functions</td>
<td class="org-left"><code>magit</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>C-c p</code></td>
<td class="org-left"><b>Projectile</b>'s prefix</td>
<td class="org-left"><code>projectile</code></td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left"><code>s-p</code></td>
<td class="org-left"><b>Projectile</b>'s alternative prefix</td>
<td class="org-left"><code>projectile</code></td>
</tr>

<tr>
<td class="org-left"><code>clojure-mode</code></td>
<td class="org-left"><code>M-SPC</code></td>
<td class="org-left">Removes all the blanks between two forms except one</td>
<td class="org-left"><code>(λmacs)</code></td>
</tr>

<tr>
<td class="org-left"><code>clojure-mode</code></td>
<td class="org-left"><code>C-c C-r</code></td>
<td class="org-left">Prefix for Clojure refactoring functions</td>
<td class="org-left"><code>clj-refactor</code></td>
</tr>

<tr>
<td class="org-left"><code>clojure-mode</code></td>
<td class="org-left"><code>s-b</code></td>
<td class="org-left">Adds a nice comment box with current line.</td>
<td class="org-left"><code>(λmacs)</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>



<div id="outline-container-orgd7d32b0" class="outline-2">
<h2 id="orgd7d32b0">Features</h2>
<div class="outline-text-2" id="text-orgd7d32b0">
<p>
Here some features implemented/available in <code>(λmacs)</code>
</p>
</div>

<div id="outline-container-org0b70f67" class="outline-3">
<h3 id="org0b70f67">Switch Java version</h3>
<div class="outline-text-3" id="text-org0b70f67">
<p>
<code>(λmacs)</code> focus is on Clojure development. Clojure is a JVM hosted
language. JVM release process has been traditionally quite slow, but
in the recent years Oracle and OpenJDK have speed up the release
process to roughly every 6 months.
</p>

<p>
For this reason it is common to having the need to use/try different
version of the underlying JVM while working on a Clojure project.
</p>

<p>
Emacs doesn't have a facility to do this and, to my knowledge, there
is package that handles this. For this reason I wrote a module that
offers this possibility and described the solution in this blog post:
<a href="http://blog.brunobonacci.com/2020/07/02/switching-between-multiple-jdk-in-emacs/">Switching between multiple Java JDK versions in Emacs</a>.
</p>

<p>
You can read more about the solution in the blog post but here I will
only describe how it works.
</p>

<p>
Firstly you need to tell <code>(λmacs)</code> where your JDKs are installed.
Typically on a macOS the default location is:
<code>/Library/Java/JavaVirtualMachines</code>.
</p>

<p>
If this is the location where are your JDK versions are installed then
you don't need to change the configuration, otherwise select the
appropriate folder in the <code>config/user-config.el</code> file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">;; base directory where all the JDK versions are installed
;; use `M-x switch-java' to select the JVM to use
(setq JAVA_BASE "/Library/Java/JavaVirtualMachines")
</pre>
</div>

<p>
Once you set the base directory where all your JDKs are installed and
evaluated the form, to select a JVM to use you can just run: <code>M-x
switch-java</code> which will show the list of available JVMs. Once you
select one JDK, it will update the <code>$JVM_HOME</code> environment variable
and use it whenever you start a new REPL or java application.
</p>

<p>
Here other commands you can run:
</p>

<ul class="org-ul">
<li><code>M-x switch-java</code> select a JDK from a list of available ones</li>
<li><code>M-x switch-java-default</code> will select the system default JDK (the
one in use prior any selection)</li>
<li><code>M-x switch-java-which-version?</code> displays the JDK currently in use.</li>
</ul>

<p>
You can see a usage demo here:
</p>


<div class="figure">
<p><img src="http://blog.brunobonacci.com/images/switch-java.gif" alt="switch-java.gif" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgdc595dd" class="outline-3">
<h3 id="orgdc595dd">Custom yasnippets</h3>
<div class="outline-text-3" id="text-orgdc595dd">
<p>
<code>yasnippets</code> is a templating minor-mode with allows to define code
templates and complete them with a few keystrokes. Think about the
repetitve structures in your code. Check out <a href="https://www.youtube.com/watch?v=ZCGmZK4V7Sg">this demo on Youtube</a>. It
works across languages and there are plenty of predefine templates
<a href="http://andreacrotti.github.io/yasnippet-snippets/snippets.html">Here</a> the is a list of all most of the boundled snippets.
</p>

<p>
However if you want to define your own snippets you can drop them in
<code>~/.emacs.d/yas</code> folder divided by major-mode. If you are unfamiliar
with the templating language used by <code>yasnippet</code> you can check
the <a href="http://joaotavora.github.io/yasnippet/snippet-development.html">official online documentation</a>.
</p>
</div>
</div>
</div>


<div id="outline-container-org3c7f6a5" class="outline-2">
<h2 id="org3c7f6a5">Get involved</h2>
<div class="outline-text-2" id="text-org3c7f6a5">
</div>
<div id="outline-container-org9089d7c" class="outline-3">
<h3 id="org9089d7c">Contribution</h3>
<div class="outline-text-3" id="text-org9089d7c">
<p>
This is my personal setup, I don't mind you using it and I'd
appreciate feedbacks and suggestions on how to improve it!
Issue a PR, and if it works for me, I'll merge it!
</p>
</div>
</div>

<div id="outline-container-org755ae9a" class="outline-3">
<h3 id="org755ae9a">References</h3>
<div class="outline-text-3" id="text-org755ae9a">
<p>
The code in this repo has is the sum of my personal experience and
the following references:
</p>

<ul class="org-ul">
<li><a href="https://github.com/bbatsov/prelude">Emacs Prelude</a> - A great Emacs distribution</li>
<li><a href="https://github.com/bbatsov/emacs.d">@bbastov .emacs.d</a> - Bozhidar's Emacs config</li>
<li><a href="https://github.com/overtone/emacs-live">emacs-live</a> - Another Emacs distribution</li>
<li><a href="https://github.com/daviwil/dotfiles/blob/master/Emacs.org">@daviwil dotfiles</a> - David Wilson's Emacs config</li>
<li><a href="https://github.com/rougier/emacs-gtd">Get Things Done with Emacs</a> - From which I took the beautiful CSS for org-mode (thanks).</li>
</ul>

<p>
<i>Thank you to all of you!</i>
</p>
</div>
</div>

<div id="outline-container-org8526d6b" class="outline-3">
<h3 id="org8526d6b">License</h3>
<div class="outline-text-3" id="text-org8526d6b">
<p>
Copyright © 2020 Bruno Bonacci and contributors.
Distributed under the GNU General Public License, version 3.
</p>
</div>
</div>
</div>
</div>
</body>
</html>
